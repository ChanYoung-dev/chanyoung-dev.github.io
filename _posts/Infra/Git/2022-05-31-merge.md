---
permalink: /Infra/Git/merge/
title: "ê·¸ë¦¼ìœ¼ë¡œ ì´í•´í•˜ëŠ” merge --no-ff, squash, rebase ê·¸ë¦¬ê³  pull request(PR)"
toc: true
comments: true
categories:
  - InfrağŸ¦Git
sidebar:
  - title: "InfrağŸ¦"
  - nav: "Infra-menu"
tags:
  - Git
sexy: 1
main: "Git"
header:
  teaser: https://user-images.githubusercontent.com/46098949/171099981-4bfef267-1c4a-454d-9c66-6c461d59dc53.png
  overlay_image: https://user-images.githubusercontent.com/46098949/171099981-4bfef267-1c4a-454d-9c66-6c461d59dc53.png
  overlay_filter: 0.5
---

`pull request(PR)`ì„ í•  ë•Œ **merge** ì˜µì…˜ì´ ìˆë‹¤  
<img width="441" alt="image" src="https://user-images.githubusercontent.com/46098949/171099981-4bfef267-1c4a-454d-9c66-6c461d59dc53.png">  

ì—¬ê¸°ì„œ ì˜µì…˜ë“¤ì€ mergeì˜ ì˜µì…˜ë“¤ê³¼ ê°™ë‹¤  
**Create a merge commit** -> `git merge <branch> --no-ff`  
**Squash and merge** -> `git merge <branch> --squash`  
**Rebase and merge** -> `git rebase <branch>`  
  
  
ì„¸ê°€ì§€ë¥¼ ë¹„êµë¥¼ ë¹„êµí•´ë³´ê¸° ìœ„í•´ ìƒí™©ì´ ë‹¤ìŒê³¼ ê°™ë‹¤ê³  ê°€ì •í•˜ì  


<img width="334" alt="image" src="https://user-images.githubusercontent.com/46098949/171120266-05df1ddc-3985-4d7d-8892-d78b608201e7.png">  

ìœ„ì™€ ê°™ì€ ìƒí™©ì—ì„œ ê¸´ê¸‰í•œ ë²„ê·¸ ìˆ˜ì •ì„ ìœ„í•´ `Hotfix`ê°€ `Master`ë¡œë¶€í„° ë¶„ê¸°í•˜ì—¬ ì‘ì—…ì„ ë‘ê°œ(Commit 2ê°œ) ì§„í–‰í–ˆë‹¤ê³  ê°€ì •  

<img width="445" alt="image" src="https://user-images.githubusercontent.com/46098949/171120425-94280050-4aa1-4a22-863d-2e8fbe0e6404.png">  


```sh
master > git log  
* 03c0e57 (Hotfix) fix bugB  
* 1693ca1 fix bugA  
* a7ee0c1 (HEAD -> master, origin/master) base commit  
```
# 1. git merge --no-ff, --ff
`git merge --no-ff`ë¥¼ ì•Œê¸° ìœ„í•´ì„  `--ff`ë¥¼ ì•Œì•„ì•¼í•œë‹¤  
`-ff`ëŠ” fast-forward ì˜ ì¤„ì„ë§ë¡œì¨ ë¹¨ë¦¬ê°ê¸°ë¼ëŠ” ëœ»ì´ë‹¤  

---
## `git merge --ff`ë¥¼ í•  ê²½ìš°

```sh
master > git merge Hotfix --ff 
Updating a7ee0c1..03c0e57
Fast-forward
master > git log
* 03c0e57 (HEAD -> master, Hotfix) fix bugB
* 1693ca1 fix bugA
* a7ee0c1 (origin/master) base commit
```

![](https://velog.velcdn.com/images/emrhssla/post/ea18e7ab-df54-4776-96e0-4437e0187573/image.png) 

`Master`ì˜ logì—ëŠ” `Hotfix`ì˜ ì»¤ë°‹ë“¤ë§Œ ì¶”ê°€ë˜ê³  ë”°ë¡œ ì¶”ê°€ë˜ëŠ” commitì€ ì—†ë‹¤  

`-ff`ëŠ” `git merge` ì˜ ê¸°ë³¸ ì˜µì…˜ì´ê¸°ë•Œë¬¸ì— `git merge`ì™€ `git merge --ff` ëŠ” ê°™ì€ ëœ»ì´ë‹¤  

#### ì´ˆê¸°í™”

ë‹¤ë¥¸ ì˜µì…˜ë„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ `git reset --hard <ëŒì•„ê°€ë ¤ëŠ” workspace>`
```sh
master > git reset --hard origin/master 
HEAD is now at a7ee0c1 base commit
master > git log
* 272c460 (Hotfix) fix bugB
* 252a393 fix bugA
* 498325c testC.txt
* a7ee0c1 (HEAD -> master, origin/master) base commit
```

---

## `git merge --no-ff`ë¥¼ í•  ê²½ìš°
`master`ì— ë³€ê²½ì´ë ¥ì´ ì—†ì–´ë„ `fast-farward`ë¥¼ í•˜ì§€ ì•Šê³  `no-fast-farward`ë¥¼ í•œë‹¤

`no-fast-farward`: `master`ì˜ logì—ëŠ” Hotfixì˜ ì‘ì—…ë‚´ì—­ commit 2ê°œì™€ ë³‘í•©commit(`Merge ~ from`)ì´ ê¸°ë¡
```sh
master > git merge Hotfix --no-ff  // mergeë‚´ìš© ì‘ì„±
Merge made by the 'recursive' strategy.
master > git log
*   842db67 (HEAD -> master) Merge branch 'Hotfix'
|\  
| * 03c0e57 (Hotfix) fix bugB
| * 1693ca1 fix bugA
|/  
* a7ee0c1 (origin/master) base commit
```

<img width="553" alt="image" src="https://user-images.githubusercontent.com/46098949/171121905-5337937d-888a-49e9-8dc3-409ff467c5ae.png">  

ì´ ë•Œ, ë§Œë“¤ì–´ì§„ commit(`Merge branch 'Hotfix'`)ëŠ” 2ê°œì˜ Parent(`Hotfix`, `master`)ë¥¼ ê°–ëŠ”ë‹¤

---

## `--ff`ë¥¼ ì ìš©ì´ ì•ˆë˜ê³  `--no-ff`ë¡œ ì ìš©ë˜ëŠ” ê²½ìš°
í•˜ì§€ë§Œ `--ff`ë¡œ ì˜µì…˜ì„ ì£¼ì–´ë„ `--no-ff`ë¡œ ì ìš©ì´ ë˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤  
- `hotfix`ê°€ ì‘ì—…ì„ í•˜ëŠ”ë™ì•ˆ `master`ì— ë³€ê²½ ë‚´ì—­ì´ ìˆëŠ” ê²½ìš°  

#### master ì‘ì—… ì¶”ê°€
```sh
master > vi testC.txt
master !1 > git add .
master +1 > git commit -m "testC.txt"  
master > git log
* | 00c9de9 (HEAD -> master) testC.txt
| * 03c0e57 (Hotfix) fix bugB
| * 1693ca1 fix bugA
|/  
* a7ee0c1 (origin/master) base commit
```

<img width="547" alt="image" src="https://user-images.githubusercontent.com/46098949/171122175-de8548ea-ea42-49e3-a761-30ec01a9a281.png">

#### merge 

```sh
master > git merge Hotfix --ff   
// Merge branch 'Hotfix'
master > git log 
*   1925dd0 (HEAD -> master) Merge branch 'Hotfix'
|\  
* | 00c9de9 testC.txt
| * 03c0e57 (Hotfix) fix bugB
| * 1693ca1 fix bugA
|/  
* a7ee0c1 (origin/master) base commit
```

<img width="644" alt="image" src="https://user-images.githubusercontent.com/46098949/171122355-715c0c5b-c2ea-499b-8356-4e79cfa40ef0.png">

`--no-ff`ë¡œ ì ìš©ì´ ëœë‹¤  

  
# 2. git merge --squash
**squash**ë€ ì˜ë‹¨ì–´ ëœ» ê·¸ëŒ€ë¡œ ë­‰ê°œë‹¤ ë¼ëŠ” ëœ»ì´ë‹¤  
`master`ì— `Hotfix`ì˜ commitë“¤ì´ ë°˜ì˜ë˜ì§€ì•Šê³  ìƒˆ commitë§Œ ë°˜ì˜ëœë‹¤  

```sh
master > git merge --squash Hotfix
Updating a7ee0c1..03c0e57
Fast-forward
Squash commit -- not updating HEAD
 testA.txt | 2 +-
 testB.txt | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)
 
// squashëŠ” commitì´ ìƒì„±ë˜ì§€ì•Šê³  Stagedìƒíƒœë§Œ ëœë‹¤
// commit ì¶”ê°€

master +2 > git add .
master +2 > git commit -m "fix bugA,B"
[master 48975f6] fix bugA,B
 2 files changed, 2 insertions(+), 2 deletions(-)
master > git log
* 48975f6 (HEAD -> master) fix bugA,B
| * 03c0e57 (Hotfix) fix bugB
| * 1693ca1 fix bugA
|/  
* a7ee0c1 (origin/master) base commit
```

<img width="437" alt="image" src="https://user-images.githubusercontent.com/46098949/171115357-a206b23b-b92a-451d-9770-5be22ead697d.png">

ì´ ë–„, `fix bugA,B`ì˜ parentëŠ” í•œê°œ(`master`)ì´ë‹¤  
# 3. git rebase
`rebase`ë€ ëª¨ë“  commitì´ í•©ì³ì§€ì§€ ì•Šê³  ê°ê° masterì— ì¶”ê°€ëœë‹¤  

`rebase`ì˜ ê¸°ëŠ¥ì„ ì•Œê¸° ìœ„í•´ì„œ `master`ë¥¼ `base commit`ìœ¼ë¡œ `reset`í•œë’¤ ì‘ì—…ë³€ê²½ì„ í•˜ê³  `testC.txt`commitì„ ì¶”ê°€í•œë‹¤  

```sh
master > git reset --hard origin/master
HEAD is now at a7ee0c1 base commit
master > vi testC.txt
master !1 > git add .
master +1 > git commit -m "testC.txt"
[master 498325c] testC.txt
 1 file changed, 1 insertion(+), 1 deletion(-)
master > git log
 498325c (HEAD -> master) testC.txt
| * 03c0e57 (Hotfix) fix bugB
| * 1693ca1 fix bugA
|/  
* a7ee0c1 (origin/master) base commit
```


<figure align="center">
<img width="407" alt="center" src="https://user-images.githubusercontent.com/46098949/171118045-add544c0-15e0-4652-b96d-70f637ccc5c7.png">
<figcaption align="center">í˜„ì¬ìƒíƒœ</figcaption>
</figure>
---
rebase ì‘ì—… ì§„í–‰

```sh
master > git checkout Hotfix
Switched to branch 'Hotfix'
Hotfix > git rebase master
First, rewinding head to replay your work on top of it...
Applying: fix bugA
Applying: fix bugB
Hotfix > git checkout master
Switched to branch 'master'
master > git merge Hotfix
Updating 498325c..272c460
Fast-forward
 testA.txt | 2 +-
 testB.txt | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)
master > git log
* 272c460 (HEAD -> master, Hotfix) fix bugB
* 252a393 fix bugA
* 498325c testC.txt
* a7ee0c1 (origin/master) base commit
```

<img width="444" alt="image" src="https://user-images.githubusercontent.com/46098949/171119636-3a7a5f0b-fbe1-474c-ab7c-38d7dee76db2.png">

`fix bugA`, `fix bugB`ëŠ” `Hotfix`ì—ì„œ ì‘ì—…í•œ commitì˜ ë‚´ìš©ì´ì§€ë§Œ commitì˜ idë¥¼ ë³´ë©´ ë‹¤ë¥¸ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤  


# 4. ë¬´ì—‡ì„ ì„ íƒí•´ì•¼í•˜ëŠ”ê°€
- `rebase`ì˜ ê²½ìš° ìì¹« ì˜ëª»í•˜ë©´ ì—‰ì¼œë²„ë¦´ìˆ˜ê°€ ìˆë‹¤.
- `sqaush` : `master`ì— `Hotfix`ì´ commit 2ê°œ(`commit A`,`commit B`)ë¥¼ PRìš”ì²­í•˜ê³  `squash`ë¡œ mergeí–ˆë‹¤ê³  ê°€ì •
  - merge ì´í›„ì—, `Hotfix` ê°€ ì¶”ê°€ì‘ì—…(`commit C`, `commit D`)ì„ í•˜ê³  ë˜ PRì„ ë³´ë‚´ë©´ 4ê°œì˜ ì»¤ë°‹(`commit A`, `commit B`, `commit C`, `commit D`)ì´ PRë‚´ì—­ì— í¬í•¨ë˜ì–´ ë³´ë‚´ì§„ë‹¤. ê³¼ê±°ì— í–ˆë˜ commit (`commit A`, `commit B`)ì´ í¬í•¨ë˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤
- `merge`: ê·¸ëƒ¥ `merge`ë¥¼ ì‚¬ìš©í•  ê²½ìš° `sqaush`ì˜ ìœ„ ë¬¸ì œì ì´ ë°œìƒí•˜ì§€ì•Šê³  ì‘ì—…í–ˆë˜ ë‚´ì—­ë“¤ë§Œ PR ìš”ì²­ì„ í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ `Hotfix`ì˜ commit(`commit C`, `commit D`)ë“¤ì´ ì „ë¶€ `master`ì˜ logì˜ ì˜¬ë¼ê°„ë‹¤.
  - ë°˜ë©´ì— `-squash`ëŠ” í•œê°œì˜ commit(ìœ„ ì˜ˆì œê²½ìš° `fix bugA,B`)ë§Œ `master`ì— ì˜¬ë¼ê°„ë‹¤. `commit A`, `commit B`ëŠ” PR ë‚´ì—­ì„ ë“¤ì–´ê°€ë©´ ë³¼ ìˆ˜ìˆë‹¤.

ê²°ë¡ 
- ì¼íšŒì„± branchì˜ ê²½ìš° :`squash`
- ì§€ì†ì ì¸ branchì˜ ê²½ìš° : `merge --no-ff`
  - ex) git flow ëª¨ë¸ì—ì„œ `develop`