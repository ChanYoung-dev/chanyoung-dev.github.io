---
permalink: /Cloud/AWS/extendEBS
title: "EC2 ìš©ëŸ‰ í™•ì¥"
toc: true
categories:
  - CloudğŸ¦AWS
comments: true
sidebar:
  - title: "CloudğŸ¦"
  - nav: "Cloud-menu"
tags:
  - AWS
sexy: 1
main: "AWS"
---

EC2 í•˜ë‚˜ì— Dockerê°€ ì—¬ëŸ¬ê°œ ì„¤ì¹˜ë˜ì–´ìˆì–´ì„œ EC2ì˜ ìš©ëŸ‰ì´ ë¶€ì¡±í•´ì„œ ìš©ëŸ‰ì„ ì˜¬ë¦¬ê¸°ë¡œ í•˜ì˜€ë‹¤  
EC2ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë³¼ë¥¨ì¸ EBSëŠ” ì´ 30Gê¹Œì§€ ë¬´ë£Œì´ë‹¤

# ìƒí™©

- EC2ì— 5ê°œì˜ Docker Containerê°€ ì„¤ì¹˜ë˜ì–´ìˆê¸°ë•Œë¬¸ì— ìš©ëŸ‰ì´ 93%ì— ì„ë°•í•¨
  ```sh
  [ec2-user@ip-172-31-38-133 ~]$ df -h
  Filesystem      Size  Used Avail Use% Mounted on
  devtmpfs        474M     0  474M   0% /dev
  tmpfs           483M     0  483M   0% /dev/shm
  tmpfs           483M  816K  482M   1% /run
  tmpfs           483M     0  483M   0% /sys/fs/cgroup
  /dev/xvda1      8.0G  7.4G  618M  93% /
  tmpfs            97M     0   97M   0% /run/user/1000
  ```


# í•´ê²°

## a.[AWS EBS ê³µì‹ë¬¸ì„œ](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/recognize-expanded-volume-linux.html)ë¥¼ ì°¸ê³ í•˜ì—¬ ìš©ëŸ‰ í™•ì¥
- [aws ec2](https://ap-northeast-2.console.aws.amazon.com/ec2/v2/home?region=ap-northeast-2#Instances:)ì— ì ‘ì†í•˜ì—¬ ë³¼ë¥¨(ebs) ì„ íƒ í›„ 8GB -> 16GBë¡œ í™•ì¥

  <figure align="center">
  <img width="805" alt="image" src='https://user-images.githubusercontent.com/46098949/174278327-9700769b-de3a-41ab-9a63-3faf41908951.png'>
  <figcaption align="center"> Volume(EBS) ì„ íƒ í›„ í™•ì¥</figcaption>
  
## b. AWS EC2ì—ì„œ íŒŒì¼ì‹œìŠ¤í…œ í™•ì¥
  - ì–´ë–¤ íŒŒí‹°ì…˜ì„ ì¡°ì •í•´ì•¼í•˜ëŠ”ì§€ í™•ì¸
    ```sh
    [ec2-user@ip-172-31-38-133 ~]$ lsblk
    NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
    xvda    202:0    0  16G  0 disk 
    â””â”€xvda1 202:1    0   8G  0 part /
    ```

  - íŒŒí‹°ì…˜ í¬ê¸° ì¡°ì •
    ```sh
    [ec2-user@ip-172-31-38-133 ~]$ sudo growpart /dev/xvda 1
    CHANGED: partition=1 start=4096 old: size=16773087 end=16777183 new: size=33550303 end=33554399
    ```
    
    - í™•ì¸
      ```sh
      [ec2-user@ip-172-31-38-133 ~]$ lsblk
      NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
      xvda    202:0    0  16G  0 disk 
      â””â”€xvda1 202:1    0  16G  0 part /
      ```
      
  - `FileSystem`ì— ë”°ë¼ ë³€ê²½
    - ã„±. xfs íŒŒì¼ ì‹œìŠ¤í…œì¸ ê²½ìš°
      ```sh
      [ec2-user@ip-172-31-38-133 ~]$ sudo xfs_growfs -d /
      meta-data=/dev/xvda1             isize=512    agcount=4, agsize=524159 blks
              =                       sectsz=512   attr=2, projid32bit=1
              =                       crc=1        finobt=1 spinodes=0
      data     =                       bsize=4096   blocks=2096635, imaxpct=25
              =                       sunit=0      swidth=0 blks
      naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
      log      =internal               bsize=4096   blocks=2560, version=2
              =                       sectsz=512   sunit=0 blks, lazy-count=1
      realtime =none                   extsz=4096   blocks=0, rtextents=0
      data blocks changed from 2096635 to 4193787
      ```
    - ã„´. ex4 íŒŒì¼ ì‹œìŠ¤í…œì¸ ê²½ìš°
      ```sh
      sudo resize2fs /dev/nvme0n1p1
      sudo resize2fs /dev/nvme1n1
      ```  
    - íŒŒì¼ì‹œìŠ¤í…œí™•ì¸ì€ `df -hT`
  
  - ë³€ê²½í™•ì¸
    ```sh
    [ec2-user@ip-172-31-38-133 ~]$ df -h
    Filesystem      Size  Used Avail Use% Mounted on
    devtmpfs        474M     0  474M   0% /dev
    tmpfs           483M     0  483M   0% /dev/shm
    tmpfs           483M  816K  482M   1% /run
    tmpfs           483M     0  483M   0% /sys/fs/cgroup
    /dev/xvda1       16G  7.4G  8.6G  47% /
    tmpfs            97M     0   97M   0% /run/user/1000
    ```

aws ec2ì˜ ë©”ëª¨ë¦¬ë„ ë¶€ì¡±í•˜ì—¬ awsì˜ [SWAPì„ ì´ìš©í•˜ì—¬ ë©”ëª¨ë¦¬ ì¦ì„¤](https://aws.amazon.com/ko/premiumsupport/knowledge-center/ec2-memory-swap-file/)ê³µì‹ ë¬¸ì„œë¥¼ í†µí•´ ë©”ëª¨ë¦¬ë¥¼ í™•ì¥í–ˆë‹¤
{: .notice--success}

```sh
[ec2-user@ip-172-31-38-133 ~]$ free
              total        used        free      shared  buff/cache   available
Mem:         988676      763320       68580          88      156776       83840
Swap:       2097148     1032196     1064952
```

