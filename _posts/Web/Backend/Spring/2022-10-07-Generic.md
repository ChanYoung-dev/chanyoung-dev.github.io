---
permalink: /Java/Spring/Generic/
title: "ì œë„¤ë¦­ ê¸°ë³¸ ë° ì‘ìš©"
toc: true
categories:
  - JavağŸ›Spring
comments: true
sidebar:
  - title: "JavağŸ›"
  - nav: "Java-menu"
tags:
  - Spring
  - Java
sexy: 1
main: "Spring"
header:
  teaser: https://user-images.githubusercontent.com/46098949/194578727-abe20e75-ad13-4028-8ca6-b6a3b4fc711e.png
  overlay_image: https://user-images.githubusercontent.com/46098949/194578727-abe20e75-ad13-4028-8ca6-b6a3b4fc711e.png
  overlay_filter: 0.5
excerpt: Generic Typeì—ì„œì˜ ì‚¬ìš©ë²•ê³¼ ì‘ìš©ë²•
---

<span style = "font-size:1.5em;  font-weight: 700;">Genericì´ë€</span><br>
Genericì„ ì´ìš©í•˜ë©´ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” ì—¬ëŸ¬ í•¨ìˆ˜/í´ë˜ìŠ¤ë“¤ì„ í•˜ë‚˜ë¡œ ë¬¶ì„ ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ì½”ë“œì˜ ì¬ì‚¬ìš©ì„±ì´ ë†’ì•„ì§„ë‹¤
ì œë„¤ë¦­ íƒ€ì… ì‚¬ìš©ë²•ì€ ì—¬ëŸ¬ ìë£Œë“¤ì´ ë§ê¸°ë•Œë¬¸ì— ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ”ì§€ ì˜ˆì œë¥¼ ë§Œë“¤ì–´ë³´ì•˜ë‹¤
{: .notice--primary}


# ìš”êµ¬ì‚¬í•­
- ì‚¬ìš©ìê°€ ì‚¬ì§„ë°ì´í„°ì™€ Todoë°ì´í„°ë¥¼ ìš”êµ¬í•œë‹¤
- ì‚¬ì§„ë°ì´í„°ì™€ Todoë°ì´í„°ë¥¼ íŠ¹ì •ì„œë²„ë¡œ HTTP ìš”ì²­í•˜ëŠ”ë° ì´ ë•Œ íŠ¹ì •ì„œë²„ëŠ” [jsonplaceholder](https://jsonplaceholder.typicode.com)ë¥¼ ì´ìš©í•œë‹¤.
   - jsonholderì˜ ResponseëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤
    ![image](https://user-images.githubusercontent.com/46098949/194584647-9fefd216-01f6-4b51-9021-0d6018226e18.png)
    ![image](https://user-images.githubusercontent.com/46098949/194584712-31830fdb-1b87-4dcf-b64b-ddb820bdde37.png)
    - `WebClient`ë¥¼ ì´ìš©í•˜ì—¬ Httpí†µì‹ ì„ í•œë‹¤

      {% highlight java linenos %}
      private WebClient getWebClient() {
              return WebClient.builder()
                      .baseUrl("https://jsonplaceholder.typicode.com")
                      .build();
          }
      {% endhighlight %}

# ì œë„¤ë¦­ íƒ€ì… ì‚¬ìš© ì „
## 1. Request Class ìƒì„±
{% highlight java linenos %}
abstract static private class Response{

}

@Data
@NoArgsConstructor
private static class Photo extends Response{
    Integer albumId;
    Integer id;
    String title;
    String url;
    String thumbnailUrl;
    String hi;
}

@Data
@NoArgsConstructor
private static class Todo extends Response{
    Integer userId;
    Integer id;
    String title;
    String completed;
}
{% endhighlight %}

## 2. ìš”ì²­í•˜ëŠ” í•¨ìˆ˜
{% highlight java linenos %}
public Photo requestPhoto() {
    Photo result = getWebClient().get()
            .uri("/photos/1")
            .retrieve()
            .bodyToMono(Photo.class)
            .block();

    return result;
}

public Todo requestTodo() {
    Todo result = getWebClient().get()
            .uri("/todos/1")
            .retrieve()
            .bodyToMono(Todo.class)
            .block();

    return result;
}
{% endhighlight %}

## 3. ì‹¤ì œí´ë¼ì´ì–¸íŠ¸ì½”ë“œ ê²¸ í…ŒìŠ¤íŠ¸ì½”ë“œ
{% highlight java linenos %}
@Test
public void test(){
    Photo photo = requestPhoto();
    assertNull(requestPhoto().getHi());
    assertEquals(requestPhoto().getTitle(),"accusamus beatae ad facilis cum similique qui sunt");
    assertEquals(requestTodo().getTitle(),"delectus aut autem");
}
{% endhighlight %}
ì´ì²˜ëŸ¼ í´ë¼ì´ì–¸íŠ¸ëŠ” requestPhoto(), requestTodo() ì´ëŸ°ì‹ìœ¼ë¡œ ìš”ì²­ë³„ë¡œ ì—¬ëŸ¬ê°€ì§€ì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì•¼í•œë‹¤  
**í•˜ì§€ë§Œ ì œë„¤ë¦­ íƒ€ì…ì„ ì´ìš©í•˜ë©´ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¡œ í†µì¼ì‹œí‚¬ìˆ˜ìˆë‹¤**


# ì œë„¤ë¦­íƒ€ì… ì‚¬ìš© í›„
{% highlight java linenos %}
public <T extends Response> T requestApi(String url, Class<T> classType) {
    T result = (T) getWebClient().get()
            .uri("/{url}/1",url)
            .retrieve()
            .bodyToMono(classType)
            .block();

    return (T)result;
}

@Test
public void test2(){
    assertEquals(requestApi("photos", Photo.class).getTitle(),"accusamus beatae ad facilis cum similique qui sunt");
    assertEquals(requestApi("todos", Todo.class).getTitle(),"delectus aut autem");
}
{% endhighlight %}
- ì, ì´ì œ ì—¬ëŸ¬ê°€ì§€ í•¨ìˆ˜ë¥¼ ë§Œë“¤ í•„ìš” ì—†ì´ `requestApi()` í•¨ìˆ˜ í•˜ë‚˜ë¡œ í†µì¼ ì‹œí‚¬ìˆ˜ìˆê²Œ ë˜ì—ˆë‹¤
- ë‹¤í˜•ì„±ì„ ì´ìš©í•´ì•¼í•˜ê¸°ë•Œë¬¸ì— ê¼­ `Request Class`ëŠ” ê³µí†µì ìœ¼ë¡œ ë¶€ëª¨í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ì•¼í•œë‹¤


